import{j as I}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Be8AcK8B.js";import{m as $}from"./proxy.B_iCtuoW.js";import"./MotionConfigContext.YvF8K3D-.js";function K({text:n,speed:M=50,maxIterations:S=10,sequential:v=!1,revealDirection:g="start",useOriginalCharsOnly:b=!1,characters:z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+",className:A="",parentClassName:H="",encryptedClassName:k="",animateOn:w="hover",...D}){const[E,p]=i.useState(n),[x,j]=i.useState(!1),[L,m]=i.useState(!1),[C,N]=i.useState(new Set),[R,P]=i.useState(!1),y=i.useRef(null);i.useEffect(()=>{let o,c=0;const f=e=>{const a=n.length;switch(g){case"start":return e.size;case"end":return a-1-e.size;case"center":{const r=Math.floor(a/2),t=Math.floor(e.size/2),u=e.size%2===0?r+t:r-t-1;if(u>=0&&u<a&&!e.has(u))return u;for(let s=0;s<a;s++)if(!e.has(s))return s;return 0}default:return e.size}},l=b?Array.from(new Set(n.split(""))).filter(e=>e!==" "):z.split(""),d=(e,a)=>{if(b){const r=e.split("").map((s,h)=>({char:s,isSpace:s===" ",index:h,isRevealed:a.has(h)})),t=r.filter(s=>!s.isSpace&&!s.isRevealed).map(s=>s.char);for(let s=t.length-1;s>0;s--){const h=Math.floor(Math.random()*(s+1));[t[s],t[h]]=[t[h],t[s]]}let u=0;return r.map(s=>s.isSpace?" ":s.isRevealed?e[s.index]:t[u++]).join("")}else return e.split("").map((r,t)=>r===" "?" ":a.has(t)?e[t]:l[Math.floor(Math.random()*l.length)]).join("")};return x?(m(!0),o=setInterval(()=>{N(e=>{if(v)if(e.size<n.length){const a=f(e),r=new Set(e);return r.add(a),p(d(n,r)),r}else return clearInterval(o),m(!1),e;else return p(d(n,e)),c++,c>=S&&(clearInterval(o),m(!1),p(n)),e})},M)):(p(n),N(new Set),m(!1)),()=>{o&&clearInterval(o)}},[x,n,M,S,v,g,z,b]),i.useEffect(()=>{if(w!=="view")return;const o=d=>{d.forEach(e=>{e.isIntersecting&&!R&&(j(!0),P(!0))})},c={root:null,rootMargin:"0px",threshold:.1},f=new IntersectionObserver(o,c),l=y.current;return l&&f.observe(l),()=>{l&&f.unobserve(l)}},[w,R]);const T=w==="hover"?{onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1)}:{};return I.jsxs($.span,{ref:y,className:`inline-block whitespace-pre-wrap ${H}`,...T,...D,children:[I.jsx("span",{className:"sr-only",children:E}),I.jsx("span",{"aria-hidden":"true",children:E.split("").map((o,c)=>{const f=C.has(c)||!L||!x;return I.jsx("span",{className:f?A:k,children:o},c)})})]})}export{K as default};

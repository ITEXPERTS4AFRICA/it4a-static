import{j as k}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Be8AcK8B.js";const H=({theme:P="dark",pointCount:T=120,showParticles:O=!0,parallaxIntensity:L=.4,className:j="",style:q={},gradient:v="",animationSpeed:F=1,communicationFrequency:I=100,children:X})=>{const x=i.useRef(null),u=i.useRef(null),[R,w]=i.useState("dark"),[b,A]=i.useState({x:0,y:0}),a={pointCount:T,maxDistance:180,minDistance:60,fadeSpeed:.02,lineOpacity:.15,minPointSize:1.5,maxPointSize:3.5,lightParticlesCount:25,parallaxIntensity:L,showParticles:O,animationSpeed:F,communicationFrequency:I,colors:{light:{background:v||"rgba(248, 250, 252, 0.95)",points:"#f1ca13",lines:"#09090b",particles:"#f1ca13"},dark:{background:v||"rgba(15, 23, 42, 0.95)",points:"#ffffff",lines:"#ffffff",particles:"#f1ca13"}}},g=i.useRef([]),y=i.useRef([]),M=i.useRef(null),E=i.useRef(0),p=i.useRef(0),z=i.useRef(0);i.useEffect(()=>{if(P==="auto"){const e=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{w(e.matches?"dark":"light")};return n(),e.addEventListener("change",n),()=>e.removeEventListener("change",n)}else w(P)},[P]),i.useEffect(()=>{const e=s=>{if(!u.current)return;const o=u.current.getBoundingClientRect();A({x:(s.clientX-o.left-o.width/2)/(o.width/2),y:(s.clientY-o.top-o.height/2)/(o.height/2)})},n=u.current;return n&&n.addEventListener("mousemove",e),()=>{n&&n.removeEventListener("mousemove",e)}},[]);const $=i.useCallback(e=>{const n=[],s=Math.sqrt(a.pointCount),o=Math.sqrt(a.pointCount),c=e.width/o,t=e.height/s;for(let r=0;r<a.pointCount;r++){const l=r%o,f=Math.floor(r/o),d=(f%2===0?c/2:0)+l*c,h=f*t,C=a.minPointSize+Math.random()*(a.maxPointSize-a.minPointSize),m={id:`point-${r}`,x:d+(Math.random()-.5)*c*.4,y:h+(Math.random()-.5)*t*.4,opacity:Math.random(),targetOpacity:Math.random(),speed:.01+Math.random()*.03,connections:[],baseX:d,baseY:h,size:C,pulse:Math.random(),pulseDirection:Math.random()>.5?1:-1};n.push(m)}D(n),g.current=n},[a]),D=i.useCallback(e=>{e.forEach(n=>n.connections=[]);for(let n=0;n<e.length;n++)for(let s=n+1;s<e.length;s++){const o=e[n].x-e[s].x,c=e[n].y-e[s].y,t=Math.sqrt(o*o+c*c);t<a.maxDistance&&t>a.minDistance&&(e[n].connections.push(e[s]),e[s].connections.push(e[n]))}},[a]),N=i.useCallback(()=>{const e=g.current;if(e.length===0)return;const n=R==="dark"?a.colors.dark:a.colors.light,s=e.filter(r=>r.connections.length>0&&r.opacity>.5);if(s.length===0)return;const o=s[Math.floor(Math.random()*s.length)],c=o.connections[Math.floor(Math.random()*o.connections.length)],t={id:`particle-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,from:o,to:c,position:0,speed:(.005+Math.random()*.005)*a.animationSpeed,size:2+Math.random()*2,color:n.particles,fading:!1,life:1};y.current=[...y.current,t]},[R,a]),W=i.useCallback(()=>{const e=a.parallaxIntensity*15;g.current.forEach(n=>{const s=b.x*e,o=b.y*e;n.x=n.baseX+s,n.y=n.baseY+o})},[b,a]);i.useEffect(()=>{const e=x.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const s=()=>{if(!u.current)return;const c=u.current;e.width=c.clientWidth,e.height=c.clientHeight,$(e)};window.addEventListener("resize",s),s();const o=c=>{p.current||(p.current=c),c-p.current,p.current=c,Y(n,e),M.current=requestAnimationFrame(o)};return M.current=requestAnimationFrame(o),()=>{window.removeEventListener("resize",s),M.current&&cancelAnimationFrame(M.current)}},[$]);const Y=(e,n,s)=>{const o=R==="dark"?a.colors.dark:a.colors.light,c=Date.now();if(c-E.current>5e3&&(D(g.current),E.current=c),c-z.current>1e3/a.communicationFrequency&&(N(),z.current=c),a.parallaxIntensity>0&&W(),e.fillStyle=o.background,e.fillRect(0,0,n.width,n.height),g.current.forEach(t=>{Math.abs(t.opacity-t.targetOpacity)<.01&&(t.targetOpacity=Math.random()),t.opacity<t.targetOpacity?t.opacity=Math.min(t.opacity+t.speed*a.animationSpeed,t.targetOpacity):t.opacity=Math.max(t.opacity-t.speed*a.animationSpeed,t.targetOpacity),t.pulse+=.01*t.pulseDirection*a.animationSpeed,(t.pulse>1||t.pulse<0)&&(t.pulseDirection*=-1,t.pulse=Math.max(0,Math.min(1,t.pulse)));const r=.5+.5*t.pulse;if(e.strokeStyle=`${o.lines}${Math.floor(a.lineOpacity*t.opacity*100)}`,e.lineWidth=.7*t.opacity,t.connections.forEach(l=>{l.opacity>.1&&(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(l.x,l.y),e.stroke())}),t.opacity>.1){const l=t.size*t.opacity*r,f=e.createRadialGradient(t.x,t.y,0,t.x,t.y,l*1.5);f.addColorStop(0,`${o.points}ff`),f.addColorStop(.7,`${o.points}aa`),f.addColorStop(1,`${o.points}00`),e.fillStyle=f,e.beginPath(),e.arc(t.x,t.y,l*1.5,0,Math.PI*2),e.fill()}}),a.showParticles&&y.current.length>0){const t=[];y.current.forEach(r=>{r.position+=r.speed;const l=r.from,f=r.to,S=r.position,d=l.x+(f.x-l.x)*S,h=l.y+(f.y-l.y)*S;if(S>=1&&(r.fading=!0),r.fading&&(r.life-=.05*a.animationSpeed,r.life<=0))return;const C=r.size*r.life,m=e.createRadialGradient(d,h,0,d,h,C*2);m.addColorStop(0,`${r.color}ff`),m.addColorStop(.5,`${r.color}aa`),m.addColorStop(1,`${r.color}00`),e.fillStyle=m,e.beginPath(),e.arc(d,h,C*2,0,Math.PI*2),e.fill(),t.push(r)}),y.current=t}};return k.jsxs("div",{ref:u,className:`relative  ${j}`,style:q,children:[k.jsx("canvas",{ref:x,className:"absolute inset-0 w-full h-full "}),k.jsx("div",{className:"relative z-10 size-full",children:X})]})};export{H as default};
